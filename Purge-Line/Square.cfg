[gcode_macro _SQUARE_PURGE]
variable_side_length: 10
gcode:

    {% set all_points = printer.exclude_object.objects | map(attribute='polygon') | sum(start=[]) %}
    {% set x_min = (all_points | map(attribute=0) | min ) %}
    {% set x_max = (all_points | map(attribute=0) | max ) %}
    {% set y_min = (all_points | map(attribute=1) | min ) %}
    {% set y_max = (all_points | map(attribute=1) | max ) %}

    {% mid_to_corner = ((side_length/2)**0.5) | float %}  #(16**0.5) returns square root of 16
