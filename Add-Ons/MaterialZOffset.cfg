[gcode_macro _Z_OFFSET]
variable_materials_table:
    {
        "PLA"       : (0),
        "PETG"      : (0),
        "PC+ABS"    : (0),
        "ABS"       : (0),
        "ASA"       : (0),
        "PA6"       : (0),
        "PA"        : (0),
        "PC"        : (0),
        "TPU"       : (0),
        "TPU-90A"   : (0),
        "TPU-95A"   : (0),
        "ABS-CF"    : (0),
        "ASA-CF"    : (0),
        "PA6-CF"    : (0),
        "PC+ABS-CF" : (0),
        "PC+CF"     : (0), 
        "PLA-CF"    : (0),
        "PETG-CF"   : (0),
    }

gcode:
    {% set MATERIAL = params.MATERIAL %}

    {% if MATERIAL in materials_table %}
        {% set z_offset = materials_table[MATERIAL] %}
        RESPOND MSG="Filament is {MATERIAL}, using Z offset of {z_offset}"
    {% else %}
        RESPOND TYPE=error MSG="Filament is not defined, stopping print!"
        CANCEL_PRINT
    {% endif %}
    